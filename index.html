<!DOCTYPE html>
<!-- HTML5 Hello world by kirupa - http://www.kirupa.com/html5/getting_your_feet_wet_html5_pg1.htm -->
<html lang="en-us">
	<head>
		<meta charset="utf-8">
		<title>Priority TODO</title>
		<style type="text/css">
			.todo-container {
				display: flex;
				align-items: center;
				justify-content: center;
				margin: .75rem;
				color: white;
				cursor: pointer;
				text-align: center;
			}

			.todo {
				padding: 2rem;
				flex: 15;
				border-radius: .5rem 0 0 .5rem;
				font-size: 2rem;
			}

			.todo-action {
				flex: 1;
				border-radius: 0 .5rem .5rem 0;
				background-color: #636c72;
				font-size: 2rem;
				padding: 2rem;
				font-family: sans-serif;
			}

			.todo:hover, .todo-action:hover {
				opacity: 0.5;
			}
	
			.high-priority {
				background-color: #d9534f;
			}

			.medium-priority {
				background-color: #f0ad4e;
			}

			.low-priority {
				background-color: #5cb85c;
			}

			.add {
				max-width: 25%;
				border-radius: 5rem;
			}
		</style>
	</head>
	<body>
		<div id="view">
			<div id="app">
				<div class="todo-container" v-for="todo in sortedTodos">
					<div 
						class="todo" 
						v-bind:class="todo.priority"
						v-on:click="edit(todo)"
					>
						{{ todo.text }}
					</div>
					<div class="todo-action" v-on:click="remove(todo)">X</div>
				</div>
				<div class="todo-container">
					<!--<div class="new todo">-->
					<!--	<input>-->
					<!--	<select>-->
					<!--		<option value="high-priority">High priority</option>-->
					<!--		<option value="medium-priority">Medium priority</option>-->
					<!--		<option value="low-priority">Low priority</option>-->
					<!--<input date>-->
					<!--	</select>-->
					<!--</div>-->
					<div class="todo-action add" v-on:click="add">+</div>
				</div>
			</div>
		</div>

		
		<script src="https://unpkg.com/vue/dist/vue.js"></script>
		<script>
		
		      //  function route(path,handler){
        //     routes[path] = {template: template, handler: handler};
        // }
        
        // route('/', 'home', () => {
        //     console.log('home');
        //     const greeting = 'yo';
        //     return greeting;
        // });
        // route('/spots', 'template1', () => {
        //     console.log('spots');
        //     const greeting = 'yo';
        //     // return document.getElementById('template1').innerHTML;
        //     return `<h1>Page 1: ${greeting} </h1><p ${greeting}</p>`;
        // });
        // route('/spot', 'template2', () => {
        //     console.log('add spot');
        // });
        // route('/spot/:id', 'template2', () => {
        //     console.log('edit spot');
        // });
        
        // let el = null;
        // function router () {
        //     // Lazy load view element:
        //     el = el || document.getElementById('view');
        //     // Current route url (getting rid of '#' in hash as well):
        //     let url = window.location.hash.slice(1) || '/';
        //     // Get route by url:
        //     let route = routes[url];
        //     // Do we have both a view and a route?
        //     if (el && route.handler) {
        //         // Render route template with John Resig's template engine:
        //         el.innerHTML = route.handler();
        //     }
        // }
        // // Listen on hash change:
        // window.addEventListener('hashchange', router);
        // // Listen on page load:
        // window.addEventListener('load', router);
		
			var PRIORITY_ENUM = {
				'high-priority': 1,
				'medium-priority': 2,
				'low-priority': 3,
			};
			
			// Vue.component('todo-edit', {
			// 	template: '<div class="{{ priorityClass }}' v-on
			// })

			var app = new Vue({
			  el: '#app',
			  data: {
			  	todos: [
			  		{ text: 'Test2', priority: 'low-priority' },
			  		{ text: 'Test', priority: 'high-priority' },
			  		{ text: 'Test2', priority: 'low-priority' },
			  		{ text: 'Test2', priority: 'low-priority' },
			  		{ text: 'Test2', priority: 'low-priority' },
			  		{ text: 'Test2', priority: 'low-priority' },
			  		{ text: 'Test2', priority: 'low-priority' },
			  		{ text: 'Test2', priority: 'low-priority' },
			  		{ text: 'Test2', priority: 'low-priority' },
			  		{ text: 'Test2', priority: 'low-priority' },
			  		{ text: 'Test2', priority: 'low-priority' },
			  		{ text: 'Test2', priority: 'low-priority' },
			  		{ text: 'Test2', priority: 'low-priority' },
			  		{ text: 'Test2', priority: 'low-priority' },
			  		{ text: 'Test2', priority: 'low-priority' },
			  		{ text: 'Test3', priority: 'medium-priority' }
			  	]
			  },
			  computed: {
			  	sortedTodos() {
			  		return this.todos.sort((a, b) => {
			  			return PRIORITY_ENUM[a.priority] - PRIORITY_ENUM[b.priority];
			  		});
			  	}
			  },
			  methods: {
				add() {
					console.log('add');
				},
				edit(todo) {
					console.log('edit');
				},
				remove(todo) {
					this.todos.splice(this.todos.indexOf(todo), 1)
				}
			  }
			})
		</script>

	</body>
</html>
